{"id":"report-writer-0mv","title":"Sanitize DEPLOY.md - replace specific URLs with placeholders","description":"Replace hardcoded deployment URLs and IDs with generic placeholders:\n- Convex URLs: uncommon-crab-478, agreeable-giraffe-398 → \u003cyour-project\u003e\n- Daytona sandbox IDs → \u003cyour-sandbox-id\u003e\n- Team/user names (david-l-green) → generic references\n- Keep all CLI commands and env variable names (they're generic and useful)\n\nGoal: Make the deployment guide useful without exposing internal infrastructure.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-04T07:56:02.766452+11:00","updated_at":"2025-12-04T07:58:01.287978+11:00","closed_at":"2025-12-04T07:58:01.287978+11:00"}
{"id":"report-writer-14z","title":"Implement Convex table helpers (users, projects, sections, blocks)","description":"Implement low-level CRUD helpers for core tables in convex/tables/:\n- users.ts: getById, getByEmail, create\n- projects.ts: getById, listByUser, create, update, archive\n- projectMembers.ts: listByProject, listByUser, add, remove, updateRole\n- sections.ts: getById, listByProject, create, update, delete, reorder\n- blocks.ts: getById, listBySection, create, updateText, delete, reorder, bulkUpdate\n\nEach helper should:\n- Export typed query/mutation functions\n- Include proper error handling\n- Use Convex's ctx.db for operations\n- Follow naming conventions (get*, list*, create*, update*, delete*)\n\nDeliverables:\n- 5 files in convex/tables/ with comprehensive CRUD operations\n- Basic unit tests for critical helpers","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:49.705938+11:00","updated_at":"2025-11-23T09:08:10.729229+11:00","closed_at":"2025-11-23T09:08:10.729229+11:00"}
{"id":"report-writer-1jf","title":"Delete internal deployment status logs","description":"Remove files that expose internal deployment details:\n- DEPLOYMENT_STATUS.md (Convex/Daytona URLs, sandbox IDs, team names)\n- DEPLOYMENT_SUMMARY.md (duplicate status info with hardcoded URLs)\n- test-setup.md (one-time setup log, not a reusable guide)\n\nThese contain sensitive deployment identifiers that shouldn't be public.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-04T07:55:40.685873+11:00","updated_at":"2025-12-04T07:57:40.336086+11:00","closed_at":"2025-12-04T07:57:40.336086+11:00"}
{"id":"report-writer-1wy","title":"Update agentThreads for node-based anchoring","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-27T08:16:53.545487+11:00","updated_at":"2025-11-27T08:47:52.117818+11:00","closed_at":"2025-11-27T08:47:52.117818+11:00","dependencies":[{"issue_id":"report-writer-1wy","depends_on_id":"report-writer-br0","type":"blocks","created_at":"2025-11-27T08:16:53.547214+11:00","created_by":"gre538"}]}
{"id":"report-writer-2eg","title":"Implement version history UI","description":"Implement version history UI:\n- src/features/versions/:\n  - VersionHistoryPanel component (list of versions)\n  - VersionCompareView component (side-by-side or inline diff)\n  - VersionRestoreModal component (confirmation before restore)\n  - CreateVersionButton component\n  - hooks/useVersions (list, create, restore)\n  - hooks/useVersionComparison (compute diffs)\n  - components/BlockDiff (renders word-level diffs)\n\nKey features:\n- List all versions with timestamp, creator, summary\n- 'Save Version' button (creates snapshot)\n- View any version (read-only)\n- Compare two versions (visual diff with additions/deletions)\n- Restore previous version (with confirmation)\n- Auto-create version on agent edit acceptance\n\nDeliverables:\n- Version history sidebar/panel\n- Comparison view with highlighted diffs\n- Restore functionality\n- Tests for version operations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.392527+11:00","updated_at":"2025-11-23T13:32:18.122645+11:00","closed_at":"2025-11-23T13:32:18.122645+11:00"}
{"id":"report-writer-2j3","title":"Remove editor junk and uncommitted env files","description":"Clean up files that shouldn't be in version control:\n- Delete .env.local.swp (vim swap file in root)\n- Remove any tracked .DS_Store files\n- Remove .env.production if tracked (should be gitignored)\n- Verify these are properly gitignored going forward","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-04T07:55:50.255558+11:00","updated_at":"2025-12-04T07:57:53.794125+11:00","closed_at":"2025-12-04T07:57:53.794125+11:00"}
{"id":"report-writer-2jj","title":"Write Convex unit and integration tests","description":"Write Convex unit and integration tests:\n- convex/tests/editing.test.ts:\n  - Block creation, updates, reordering\n  - Section management\n  - Edit permissions (lock enforcement)\n- convex/tests/locking.test.ts:\n  - Lock acquisition for different resource types\n  - Concurrent lock attempts (expect failure)\n  - Lock expiry and takeover\n  - Auto-refresh behavior\n- convex/tests/versions.test.ts:\n  - Snapshot creation accuracy\n  - Restore round-trip (create snapshot, edit, restore, verify)\n  - Comparison between versions\n- convex/tests/agent.test.ts:\n  - Thread creation and forking\n  - Message append\n  - Lock enforcement on runAgentOnThread\n  - Agent edit application\n\nUse Convex testing patterns or Node-based tests with Convex client.\n\nTarget coverage:\n- All critical mutations tested\n- Lock edge cases covered\n- Version snapshot integrity verified\n\nDeliverables:\n- 4+ test files with comprehensive coverage\n- All tests passing\n- Tests run in CI via npm test","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.77962+11:00","updated_at":"2025-11-23T13:47:24.612788+11:00","closed_at":"2025-11-23T13:47:24.612788+11:00"}
{"id":"report-writer-35x","title":"Log PNG files sent to LLM in console output","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:26:04.399106+10:30","updated_at":"2025-12-03T13:26:49.871192+10:30","closed_at":"2025-12-03T13:26:49.871192+10:30"}
{"id":"report-writer-3kq","title":"Report Agent: Implement eval framework","description":"Parse RATING and NOTES from review comments. Compute per-section and aggregate scores. Store eval run records as JSON. Create apps/sandbox/src/report_agent/eval_runner.py. See docs/report-agent-design.md.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T12:30:02.433066+10:30","updated_at":"2025-12-03T12:58:55.502938+10:30","closed_at":"2025-12-03T12:58:55.502938+10:30"}
{"id":"report-writer-48m","title":"Copy chart PNGs to output figures folder","description":"Copy PNG files used in generation to \u003coutput-root\u003e/figures/ folder for inclusion in the markdown output","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:26:13.434667+10:30","updated_at":"2025-12-03T13:28:16.87762+10:30","closed_at":"2025-12-03T13:28:16.87762+10:30"}
{"id":"report-writer-491","title":"Update .gitignore for env files and internal dirs","description":"Strengthen .gitignore to prevent future leaks:\n1. Add .env.production explicitly\n2. Add apps/*/.env* pattern\n3. Optionally add docs/internal/ if we want to keep planning docs local\n4. Verify *.swp and .DS_Store patterns are working\n5. Run git rm --cached on any currently tracked files that should be ignored","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-04T07:56:26.573276+11:00","updated_at":"2025-12-04T07:59:04.187478+11:00","closed_at":"2025-12-04T07:59:04.187478+11:00"}
{"id":"report-writer-4bz","title":"Create new schema with documents and nodes tables","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-27T08:14:03.21873+11:00","updated_at":"2025-11-27T08:28:18.261966+11:00","closed_at":"2025-11-27T08:28:18.261966+11:00"}
{"id":"report-writer-54n","title":"Implement Convex agent threads system","description":"Implement agent threads system in convex/features/agent.ts:\n- createThread(projectId, userId, title, anchorSectionId?, anchorCommentId?): Creates agentThread\n- forkThread(parentThreadId, userId, title?): Creates new thread with parent metadata\n- appendMessage(threadId, senderType, senderUserId?, content): Adds agentMessage\n- runAgentOnThread(threadId, userId, userMessage): Main orchestration mutation:\n  - Validates/acquires thread lock (using locking.ts)\n  - Appends user message\n  - Calls runAgentOnThreadAction (action below)\n- runAgentOnThreadAction(threadId, messageId): Convex action that:\n  - Gathers thread context (sections, blocks, messages)\n  - Calls Python sandbox POST /v1/agent/run\n  - Stores agent response message\n  - Stores proposed edits in message metadata\n- applyAgentEdits(threadId, messageId): Applies proposed block edits and creates version\n\nAlso implement convex/tables/agentThreads.ts and convex/tables/agentMessages.ts.\n\nDeliverables:\n- convex/features/agent.ts with all thread operations\n- Integration with locking system\n- Sandbox API call in action\n- Tests with mocked sandbox responses","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:50.04502+11:00","updated_at":"2025-11-23T09:11:47.94398+11:00","closed_at":"2025-11-23T09:11:47.94398+11:00"}
{"id":"report-writer-7cu","title":"Implement markdown editor with block-based editing","description":"Implement markdown editor with block-based editing:\n- src/features/editor/:\n  - EditorPage (main layout with sections sidebar + editor + preview)\n  - SectionsList component (navigation, section headers)\n  - BlockEditor component (editable block with type detection)\n  - MarkdownPreview component (rendered view)\n  - hooks/useSectionBlocks (subscribes to blocks for section)\n  - hooks/useBlockEditor (handles editing, debouncing, save)\n  - utils/markdownParser (parses markdown into blocks)\n  - utils/blocksToMarkdown (converts blocks back to markdown)\n\nKey features:\n- Parse uploaded markdown into sections and blocks\n- Block types: paragraph, heading, list_item, code_block, table_row\n- Debounced auto-save (on blur or after idle period)\n- Live preview pane\n- Block-level metadata (last editor, edit type, timestamp)\n- Keyboard shortcuts (Cmd+S to save)\n\nDeliverables:\n- Working block-based editor\n- Real-time preview\n- Block parsing and serialization\n- Auto-save behavior\n- Tests for parsing and editing logic","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.199675+11:00","updated_at":"2025-11-23T13:26:22.250422+11:00","closed_at":"2025-11-23T13:26:22.250422+11:00"}
{"id":"report-writer-7pr","title":"Data catalog should scan subfolders for chart data","description":"The DataCatalog currently expects charts to be directly in category subfolders of data_root. But the actual data structure has an intermediate folder (e.g., data/example-outputs/ampol2025/2025-12-03T10.20_Ampol.../emissions/). The catalog should recursively find all chart folders or accept the actual data export folder as data_root. Fix data_catalog.py to properly discover charts in nested folder structures.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-03T13:06:43.554426+10:30","updated_at":"2025-12-03T13:07:59.081122+10:30","closed_at":"2025-12-03T13:07:59.081122+10:30"}
{"id":"report-writer-8ff","title":"Simplify CONTRIBUTING.md for public contributors","description":"Make CONTRIBUTING.md more accessible to external contributors:\n1. Keep bd/beads references but move to 'Advanced Workflows' section\n2. Emphasize GitHub Issues as primary issue tracking for contributors\n3. Remove or generalize any internal team references\n4. Ensure setup instructions are self-contained\n5. Keep focus on standard git/GitHub workflow","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-04T07:56:43.447306+11:00","updated_at":"2025-12-04T08:00:42.580308+11:00","closed_at":"2025-12-04T08:00:42.580308+11:00"}
{"id":"report-writer-8vg","title":"Rewrite comments table for node-based anchoring","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-27T08:15:20.549069+11:00","updated_at":"2025-11-27T08:43:09.111973+11:00","closed_at":"2025-11-27T08:43:09.111973+11:00","dependencies":[{"issue_id":"report-writer-8vg","depends_on_id":"report-writer-br0","type":"blocks","created_at":"2025-11-27T08:15:20.550577+11:00","created_by":"gre538"}]}
{"id":"report-writer-9a7","title":"Report Agent: Implement outline parser","description":"Parse report outline Markdown into Section dataclass. Extract title, level, section instructions, review comments, ratings. Create apps/sandbox/src/report_agent/outline_parser.py. See docs/report-agent-design.md for spec.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:28:54.973629+10:30","updated_at":"2025-12-03T12:40:51.616098+10:30","closed_at":"2025-12-03T12:40:51.616098+10:30"}
{"id":"report-writer-9yf","title":"Implement document creation with root node","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-27T08:14:37.413754+11:00","updated_at":"2025-11-27T08:41:00.347217+11:00","closed_at":"2025-11-27T08:41:00.347217+11:00","dependencies":[{"issue_id":"report-writer-9yf","depends_on_id":"report-writer-4bz","type":"blocks","created_at":"2025-11-27T08:14:37.415904+11:00","created_by":"gre538"}]}
{"id":"report-writer-b5z","title":"Implement comments system UI","description":"Implement comments system UI:\n- src/features/comments/:\n  - CommentsPanel component (sidebar with all comments)\n  - CommentThread component (individual comment + replies)\n  - CreateCommentButton component (on sections/blocks)\n  - CommentForm component\n  - AssignCommentDropdown component (assign to user or agent)\n  - ResolveCommentButton component\n  - hooks/useComments (list, create, update, resolve)\n  - components/CommentAnchor (visual anchor on document)\n\nKey features:\n- Anchor comments to sections or specific blocks\n- Assign to users or agent\n- @mentions for sections\n- Status tracking (open, in_progress, resolved)\n- Link comments to agent threads\n- Resolution summary\n- Filter by status, assignee\n\nIntegration:\n- Clicking 'Assign to Agent' creates agent thread\n- Resolved comments show resolution summary and resolver\n\nDeliverables:\n- Comments sidebar\n- Comment creation and assignment\n- Agent assignment creates thread\n- Resolution workflow\n- Tests for comment lifecycle","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.591769+11:00","updated_at":"2025-11-23T13:39:28.922021+11:00","closed_at":"2025-11-23T13:39:28.922021+11:00"}
{"id":"report-writer-b92","title":"Implement authentication and project management UI","description":"Implement authentication and project management UI:\n- src/features/auth/:\n  - LoginPage, SignupPage components\n  - useAuth hook (wraps Convex auth)\n  - Protected route wrapper\n- src/features/projects/:\n  - ProjectsListPage (shows user's projects)\n  - CreateProjectModal (create new project, upload initial markdown)\n  - ProjectSettingsPage (manage collaborators, archive/delete)\n  - components/ProjectCard\n  - hooks/useProjects, useProjectMembers\n\nFeatures:\n- Email/password login and signup\n- Session management\n- Project CRUD operations\n- Invite collaborators by email\n- Project archive/restore\n\nDeliverables:\n- Complete auth flow\n- Projects list and management UI\n- Collaborator invitation system\n- Tests for critical user flows","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.076209+11:00","updated_at":"2025-11-23T13:20:56.915498+11:00","closed_at":"2025-11-23T13:20:56.915498+11:00"}
{"id":"report-writer-bkf","title":"Delete old sections and blocks code","description":"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-27T08:23:00.662752+11:00","updated_at":"2025-11-27T08:54:23.138386+11:00","closed_at":"2025-11-27T08:54:23.138386+11:00","dependencies":[{"issue_id":"report-writer-bkf","depends_on_id":"report-writer-8vg","type":"blocks","created_at":"2025-11-27T08:23:00.665002+11:00","created_by":"gre538"},{"issue_id":"report-writer-bkf","depends_on_id":"report-writer-kkv","type":"blocks","created_at":"2025-11-27T08:23:00.666254+11:00","created_by":"gre538"},{"issue_id":"report-writer-bkf","depends_on_id":"report-writer-1wy","type":"blocks","created_at":"2025-11-27T08:23:00.666943+11:00","created_by":"gre538"}]}
{"id":"report-writer-br0","title":"Implement node CRUD operations","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-27T08:14:23.725218+11:00","updated_at":"2025-11-27T08:35:39.579487+11:00","closed_at":"2025-11-27T08:35:39.579487+11:00","dependencies":[{"issue_id":"report-writer-br0","depends_on_id":"report-writer-4bz","type":"blocks","created_at":"2025-11-27T08:14:23.726977+11:00","created_by":"gre538"}]}
{"id":"report-writer-c2h","title":"Merge VERCEL_SETUP.md into DEPLOY.md","description":"Consolidate Vercel deployment instructions:\n1. Add a 'Vercel Deployment' subsection to DEPLOY.md under 'Deploy Web Frontend'\n2. Include key content: CONVEX_DEPLOY_KEY setup, vercel.json integration\n3. Remove specific URLs, use placeholders\n4. Delete VERCEL_SETUP.md after merge\n\nThis reduces doc fragmentation and keeps one canonical deployment guide.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-04T07:56:08.590942+11:00","updated_at":"2025-12-04T07:59:16.324069+11:00","closed_at":"2025-12-04T07:59:16.324069+11:00"}
{"id":"report-writer-c6m","title":"Report Agent: Create AMPOL section-chart mapping","description":"Create section_chart_map.json specifically for AMPOL ASRS report. Map report sections (emissions, transport, residential, etc.) to relevant charts from the data export. Requires analyst input.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:30:12.108484+10:30","updated_at":"2025-12-03T13:00:23.221093+10:30","closed_at":"2025-12-03T13:00:23.221093+10:30"}
{"id":"report-writer-d7t","title":"Implement sandbox diff engine","description":"Implement diff engine in sandbox:\n- src/sandbox/core/diff_engine.py:\n  - compute_block_diff(old_text, new_text): \n    - Word-level diff algorithm\n    - Returns structured diff with additions/deletions\n    - Preserves markdown structure\n  - apply_diff(original_blocks, proposed_edits):\n    - Validates edit references\n    - Returns updated block list\n  - format_diff_for_display(diff):\n    - Converts diff to human-readable format\n    - Includes inline markers for changes\n\nUse difflib or similar library for base algorithm.\n\nKey behaviors:\n- Preserve block boundaries\n- Handle markdown-specific tokens (headings, lists, code blocks)\n- Generate diffs that can be reviewed and accepted/rejected individually\n\nDeliverables:\n- diff_engine.py with word-level diff computation\n- Unit tests with various markdown scenarios\n- Edge case handling (empty blocks, special characters)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:50.742536+11:00","updated_at":"2025-11-23T09:16:57.47952+11:00","closed_at":"2025-11-23T09:16:57.47952+11:00"}
{"id":"report-writer-e9q","title":"Include figure references in generated markdown","description":"Update LLM prompt to instruct it to reference figures using relative paths (e.g., figures/chart_id.png) and include markdown image syntax in output","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T13:26:22.565747+10:30","updated_at":"2025-12-03T13:28:57.851997+10:30","closed_at":"2025-12-03T13:28:57.851997+10:30"}
{"id":"report-writer-h4b","title":"Report Agent: Implement data catalog","description":"Discover and index chart data from folder structure. Create ChartMeta dataclass. Read plot_specs.json for chart metadata. Create apps/sandbox/src/report_agent/data_catalog.py. See docs/report-agent-design.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:29:14.501018+10:30","updated_at":"2025-12-03T12:43:12.920613+10:30","closed_at":"2025-12-03T12:43:12.920613+10:30"}
{"id":"report-writer-hu4","title":"Implement version snapshots with full node tree","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-27T08:17:19.730941+11:00","updated_at":"2025-11-27T08:49:43.809038+11:00","closed_at":"2025-11-27T08:49:43.809038+11:00","dependencies":[{"issue_id":"report-writer-hu4","depends_on_id":"report-writer-br0","type":"blocks","created_at":"2025-11-27T08:17:19.732948+11:00","created_by":"gre538"}]}
{"id":"report-writer-jkb","title":"Create project directory structure","description":"Create the complete monorepo directory structure following the oracle's design:\n- apps/web/ (React SPA with Vite)\n- apps/sandbox/ (Python FastAPI service)\n- convex/ (Convex backend with schema, tables/, features/)\n- packages/shared-types/ (TypeScript types shared across services)\n- tests/integration/ and tests/e2e/ (test harnesses)\n- docs/ directory structure\n- Root package.json with workspaces\n- .gitignore, .editorconfig, .prettierrc\n- Basic LICENSE (MIT or Apache-2.0)\n\nDeliverables:\n- All directories created with placeholder README.md files\n- Root package.json configured for pnpm workspaces\n- Basic tooling config files","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:49.446359+11:00","updated_at":"2025-11-23T08:41:14.926919+11:00","closed_at":"2025-11-23T08:41:14.926919+11:00"}
{"id":"report-writer-k68","title":"Update README.md documentation links","description":"Update README.md to reflect new doc structure:\n1. Remove links to deleted files (DEPLOYMENT_STATUS, etc.)\n2. Update paths for moved files (LLM docs now in docs/llm/)\n3. Keep documentation section clean and minimal\n4. Ensure all linked docs actually exist\n5. Remove any internal-facing doc references","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-04T07:56:37.988819+11:00","updated_at":"2025-12-04T08:00:17.352606+11:00","closed_at":"2025-12-04T08:00:17.352606+11:00"}
{"id":"report-writer-ka7","title":"Write Playwright E2E tests","description":"Write Playwright E2E tests covering key user flows:\n- tests/e2e/specs/auth.spec.ts:\n  - Sign up, login, logout\n  - Create project\n- tests/e2e/specs/editing_locks.spec.ts:\n  - Open project in two browser contexts\n  - User A locks section, User B sees lock\n  - User A edits, User B cannot edit\n  - User A releases lock, User B acquires and edits\n- tests/e2e/specs/agent_threads.spec.ts:\n  - Create thread anchored to section\n  - Send message to agent (FakeLLM responds)\n  - Review proposed edits\n  - Accept edits, verify content updated\n  - Verify version created\n- tests/e2e/specs/versions_history.spec.ts:\n  - Create version\n  - Make edits\n  - Create another version\n  - Compare versions (view diff)\n  - Restore previous version\n  - Verify content matches\n- tests/e2e/specs/comments.spec.ts:\n  - Create comment on section\n  - Assign to agent (creates thread)\n  - Resolve comment\n\nSetup:\n- Use Playwright's test fixtures\n- Page object models for reusability\n- Run against dev servers with TEST_MODE enabled\n- Use FakeLLM for predictable agent responses\n\nDeliverables:\n- 5+ spec files covering core flows\n- Page objects for common interactions\n- All tests passing\n- Tests run via npm run test:e2e","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.971661+11:00","updated_at":"2025-11-23T13:56:00.769494+11:00","closed_at":"2025-11-23T13:56:00.769494+11:00"}
{"id":"report-writer-kkv","title":"Rewrite locks table for node-based locking","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-27T08:16:08.379448+11:00","updated_at":"2025-11-27T08:46:21.673295+11:00","closed_at":"2025-11-27T08:46:21.673295+11:00","dependencies":[{"issue_id":"report-writer-kkv","depends_on_id":"report-writer-br0","type":"blocks","created_at":"2025-11-27T08:16:08.383339+11:00","created_by":"gre538"}]}
{"id":"report-writer-l4o","title":"Implement lock UI and indicators","description":"Implement lock UI and indicators:\n- src/features/locks/:\n  - LockButton component (Acquire/Release lock button)\n  - LockIndicator component (shows who holds lock)\n  - LockBadge component (visual indicator on locked items)\n  - hooks/useLock (acquire, refresh, release)\n  - hooks/useResourceLock (generic hook for any resource type)\n\nKey features:\n- Visual indicators on locked sections (badge, border color)\n- Lock status display ('Locked by [User]' vs 'Available')\n- Auto-refresh lock before expiry (every 30 min)\n- Disable editing controls when not holding lock\n- Graceful expiry handling\n- 'Request control' button for expired locks\n\nIntegration points:\n- Section editor disables when section locked by another user\n- Thread panel disables input when thread locked by another user\n\nDeliverables:\n- Lock UI components\n- useLock hook with auto-refresh\n- Visual feedback for all lock states\n- Tests for lock acquisition flows","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.298092+11:00","updated_at":"2025-11-23T13:29:21.306364+11:00","closed_at":"2025-11-23T13:29:21.306364+11:00"}
{"id":"report-writer-l64","title":"Delete large third-party LLM documentation dumps","description":"Remove full documentation copies that add bloat and have licensing concerns:\n- docs/convex-llms-full.txt\n- docs/daytona-llms-full.txt  \n- docs/vercel-llms-full.txt\n\nKeep the compact versions (*-llms.txt) which contain URLs to official docs.\nThe full versions are very large and may have copyright issues.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-04T07:55:55.876745+11:00","updated_at":"2025-12-04T07:57:44.43476+11:00","closed_at":"2025-12-04T07:57:44.43476+11:00"}
{"id":"report-writer-n34","title":"Report Agent: Implement CLI with Typer","description":"Create CLI entry point with commands: generate-report, generate-section, inspect-charts, run-eval. Use Typer for argument parsing. Create apps/sandbox/src/report_agent/cli.py. See docs/report-agent-design.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:29:53.105065+10:30","updated_at":"2025-12-03T12:56:31.874977+10:30","closed_at":"2025-12-03T12:56:31.874977+10:30"}
{"id":"report-writer-o3f","title":"Setup Python agent sandbox service","description":"Setup Python agent sandbox service using FastAPI:\n- Create apps/sandbox/ with Python project structure:\n  - pyproject.toml (using Poetry or uv)\n  - src/sandbox/\n    - main.py (FastAPI app)\n    - api/agent_run.py (POST /v1/agent/run endpoint)\n    - core/ (business logic)\n    - test_doubles/ (FakeLLM for testing)\n- Install dependencies: fastapi, uvicorn, pydantic, openai, anthropic\n- Implement health check endpoint GET /health\n- Setup environment configuration (.env support)\n- Create Dockerfile for deployment\n\nAPI Contract for POST /v1/agent/run:\nRequest: {threadId, messages, context: {sections, blocks, artifacts}}\nResponse: {agentMessage, proposedEdits: [{blockId, newMarkdownText}]}\n\nDeliverables:\n- Working FastAPI app structure\n- Health endpoint responding\n- Stub /v1/agent/run endpoint\n- Development start script (uvicorn)\n- README with setup instructions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:50.141373+11:00","updated_at":"2025-11-23T09:12:57.723638+11:00","closed_at":"2025-11-23T09:12:57.723638+11:00"}
{"id":"report-writer-ohy","title":"Move LLM helper docs to docs/llm/","description":"Organize LLM reference documentation:\n1. Create docs/llm/ directory\n2. Move compact LLM docs there:\n   - docs/convex-llms.txt → docs/llm/\n   - docs/daytona-llms.txt → docs/llm/\n   - docs/daytona-cli-llms.txt → docs/llm/\n3. Add docs/llm/README.md explaining these are AI tool references\n4. Update AGENTS.md to point to new locations","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-04T07:56:19.993964+11:00","updated_at":"2025-12-04T07:59:16.33904+11:00","closed_at":"2025-12-04T07:59:16.33904+11:00"}
{"id":"report-writer-oj4","title":"Implement Convex locking system","description":"Implement the generic locking system in convex/features/locking.ts:\n- acquireLock(projectId, resourceType, resourceId): Attempts to create lock, enforces single-lock-per-resource\n- releaseLock(lockId): Removes lock\n- refreshLock(lockId): Updates lockedAt timestamp to prevent expiry\n- getLocksForProject(projectId): Returns all active locks\n- getLockForResource(resourceType, resourceId): Returns lock if exists and not expired\n- Auto-expiry logic (1-2 hour timeout)\n\nAlso implement convex/tables/locks.ts helpers.\n\nKey behaviors:\n- Enforce at most one lock per (resourceType, resourceId)\n- Check expiry on read (lockedAt + timeout \u003c now)\n- Return clear error messages when lock is held by another user\n\nDeliverables:\n- convex/features/locking.ts with all lock operations\n- convex/tables/locks.ts with basic queries\n- Unit tests for lock acquisition, expiry, and conflicts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:49.832428+11:00","updated_at":"2025-11-23T09:09:04.881441+11:00","closed_at":"2025-11-23T09:09:04.881441+11:00"}
{"id":"report-writer-on0","title":"Write sandbox unit and integration tests","description":"Write sandbox unit and integration tests:\n- apps/sandbox/tests/test_llm_client.py:\n  - Test OpenAI and Anthropic client wrappers\n  - Test FakeLLM deterministic responses\n- apps/sandbox/tests/test_prompt_builder.py:\n  - Test prompt formatting with various contexts\n  - Test truncation for large documents\n- apps/sandbox/tests/test_diff_engine.py:\n  - Test word-level diff computation\n  - Test markdown-specific scenarios\n  - Test edge cases (empty, special chars)\n- apps/sandbox/tests/test_agent_run.py:\n  - Test POST /v1/agent/run endpoint\n  - Mock LLM responses\n  - Verify response format\n\nIntegration tests (tests/integration/sandbox.test.ts):\n- Start sandbox with FakeLLM\n- Send requests from Node test\n- Verify response structure\n- Test error handling\n\nUse pytest for Python tests.\n\nDeliverables:\n- Python unit tests for all sandbox modules\n- Integration tests for API contract\n- All tests using FakeLLM (no real API calls)\n- Tests run via npm run test:integ","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.878039+11:00","updated_at":"2025-11-23T13:49:44.71365+11:00","closed_at":"2025-11-23T13:49:44.71365+11:00"}
{"id":"report-writer-osw","title":"Setup Convex schema and base configuration","description":"Setup Convex project configuration and database schema:\n- Initialize Convex project (convex dev --once to generate config)\n- Implement convex/schema.ts with all tables from PRD:\n  - users, projects, projectMembers\n  - sections, blocks\n  - locks (generic for sections/blocks/threads)\n  - comments\n  - agentThreads, agentMessages\n  - reportVersions\n  - artifacts\n- Define proper indexes for common queries\n- Setup convex/auth.ts for email/password authentication\n- Create convex/config.ts for environment variables\n\nDeliverables:\n- convex.json configured\n- schema.ts with all table definitions and indexes\n- Auth configuration","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:49.570957+11:00","updated_at":"2025-11-23T09:06:54.019376+11:00","closed_at":"2025-11-23T09:06:54.019376+11:00"}
{"id":"report-writer-pa4","title":"Report Agent: Implement LLM agent tools","description":"Define tool schemas for: get_section_context, write_section_draft, list_charts, get_section_charts, get_chart_data, get_chart_image. Create apps/sandbox/src/report_agent/agent_tools.py. See docs/report-agent-design.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:29:34.187974+10:30","updated_at":"2025-12-03T12:50:13.056605+10:30","closed_at":"2025-12-03T12:50:13.056605+10:30"}
{"id":"report-writer-quo","title":"Move internal planning docs to docs/internal/","description":"Create docs/internal/ directory and move internal-only documents:\n- docs/AgentMarkdownEditor_PRD_v0_4.md → docs/internal/\n- docs/TASK_BREAKDOWN.md → docs/internal/\n- docs/report-agent-design.md → docs/internal/\n- docs/comment_system_design.txt → docs/internal/\n\nAdd a docs/internal/README.md explaining these are internal planning docs.\nUpdate any references in other docs if needed.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-04T07:56:14.814961+11:00","updated_at":"2025-12-04T07:59:13.289086+11:00","closed_at":"2025-12-04T07:59:13.289086+11:00"}
{"id":"report-writer-rui","title":"Report Agent: Implement section-chart mapping","description":"Create section_chart_map.json with static mapping. Implement fallback auto-mapping based on title/category matching. Create apps/sandbox/src/report_agent/section_mapper.py. See docs/report-agent-design.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:29:43.722614+10:30","updated_at":"2025-12-03T12:52:26.704622+10:30","closed_at":"2025-12-03T12:52:26.704622+10:30"}
{"id":"report-writer-rva","title":"Enhance docs/contributing-for-agents.md with AGENTS.md content","description":"Create a comprehensive AI tools contribution guide:\n1. Keep AGENTS.md at root (required by tooling)\n2. Create/update docs/contributing-for-agents.md with:\n   - bd workflow instructions (from AGENTS.md)\n   - LLM doc references (point to docs/llm/)\n   - AI-specific development guidelines\n   - Quick command reference\n3. Make this the canonical agent contributor guide\n4. AGENTS.md can be minimal, pointing to this doc for details","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-04T07:56:50.610801+11:00","updated_at":"2025-12-04T08:01:12.039487+11:00","closed_at":"2025-12-04T08:01:12.039487+11:00"}
{"id":"report-writer-s3u","title":"Review and clean data/example-outputs/","description":"Review example data for sensitive content:\n1. Check data/example-outputs/ for proprietary or customer data\n2. Remove or anonymize any real project names, customer references\n3. Keep only obviously synthetic/generic examples\n4. If tests depend on this data, update with sanitized versions\n5. Consider if this directory should be gitignored entirely","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-04T07:56:32.213142+11:00","updated_at":"2025-12-04T07:59:16.624576+11:00","closed_at":"2025-12-04T07:59:16.624576+11:00"}
{"id":"report-writer-scf","title":"Implement sandbox LLM client and prompt builder","description":"Implement LLM client and prompt building in sandbox:\n- src/sandbox/core/llm_client.py:\n  - Abstract BaseLLMClient class\n  - OpenAIClient implementation (GPT-4)\n  - AnthropicClient implementation (Claude)\n  - Configuration for training-disabled API calls\n- src/sandbox/core/prompt_builder.py:\n  - build_agent_prompt(thread_messages, context):\n    - Formats conversation history\n    - Includes relevant sections/blocks from context\n    - Adds instructions for response format\n    - Includes examples of proposed edits\n  - Handles truncation for large documents\n- src/sandbox/test_doubles/fake_llm.py:\n  - FakeLLM class with deterministic responses\n  - Returns predictable outputs for test scenarios\n  - Configurable response mapping\n\nDeliverables:\n- LLM client abstraction working with OpenAI and Anthropic\n- Prompt builder with proper context formatting\n- FakeLLM for testing\n- Unit tests for prompt building","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:50.234656+11:00","updated_at":"2025-11-23T09:15:16.217018+11:00","closed_at":"2025-11-23T09:15:16.217018+11:00"}
{"id":"report-writer-sdf","title":"Setup React web app structure","description":"Setup React web application structure:\n- Initialize apps/web/ with Vite + React + TypeScript\n- Install dependencies:\n  - convex (client library)\n  - react-router-dom\n  - @radix-ui/* or shadcn/ui for UI components\n  - tailwindcss\n  - react-markdown, remark-gfm for preview\n- Create directory structure:\n  - src/app/ (routing, layout)\n  - src/features/ (auth, projects, editor, comments, locks, versions, agentThreads)\n  - src/shared/ (UI primitives, hooks, utils)\n  - src/lib/ (convex client setup)\n- Configure Vite\n- Setup Tailwind CSS\n- Create basic App shell with routing\n\nDeliverables:\n- Working Vite dev server\n- Convex client configured\n- Basic routing structure\n- Shared UI components setup (Button, Input, Card, etc.)\n- README with dev instructions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:50.958638+11:00","updated_at":"2025-11-23T09:20:09.579473+11:00","closed_at":"2025-11-23T09:20:09.579473+11:00"}
{"id":"report-writer-sj9","title":"Setup testing infrastructure and harness","description":"Setup comprehensive testing infrastructure:\n- Root package.json scripts:\n  - test: run unit tests\n  - test:integ: run integration tests\n  - test:e2e: run Playwright tests\n  - test:ci: run all tests sequentially\n- Install testing dependencies:\n  - vitest (unit tests)\n  - @testing-library/react (component tests)\n  - playwright (E2E tests)\n  - start-server-and-test (for integration/E2E)\n- Create tests/integration/ setup:\n  - Convex test client configuration\n  - Sandbox test server with FakeLLM\n  - Helper utilities for test data seeding\n- Create tests/e2e/ setup:\n  - playwright.config.ts\n  - Test fixtures for auth, projects\n  - Page object models\n- Create test utilities:\n  - tests/utils/convexTestClient.ts\n  - tests/utils/seedData.ts\n  - tests/utils/testHelpers.ts\n\nCritical for AI agents:\n- All tests are non-interactive\n- Clear pass/fail exit codes\n- JSON reporters for parsing\n- Deterministic fake LLM responses\n\nDeliverables:\n- Complete test harness structure\n- Test scripts configured\n- Playwright installed and configured\n- Test utilities and helpers\n- Documentation in docs/testing.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-23T08:24:51.685867+11:00","updated_at":"2025-11-23T09:05:51.481924+11:00","closed_at":"2025-11-23T09:05:51.481924+11:00"}
{"id":"report-writer-tq6","title":"Report Agent: Implement chart reader with summaries","description":"Load CSV data, compute pre-processed summaries (dimensions, scenarios, key insights). Support PNG base64 encoding. Create apps/sandbox/src/report_agent/chart_reader.py. See docs/report-agent-design.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-03T12:29:24.501788+10:30","updated_at":"2025-12-03T12:47:10.048002+10:30","closed_at":"2025-12-03T12:47:10.048002+10:30"}
{"id":"report-writer-v6n","title":"Create documentation files (README, CONTRIBUTING, testing, etc.)","description":"Create comprehensive documentation:\n- README.md:\n  - Project description and key features\n  - Architecture diagram (3-tier: web, Convex, sandbox)\n  - Quick start guide\n  - Development setup instructions\n  - Links to detailed docs\n- CONTRIBUTING.md:\n  - How to set up dev environment\n  - Code organization and conventions\n  - Where to add features\n  - Testing requirements before PR\n  - Commit message guidelines\n  - PR process\n- LICENSE:\n  - Choose and add MIT or Apache-2.0 license\n- docs/architecture.md:\n  - System overview\n  - Data flow diagrams\n  - Component interactions\n- docs/data-model.md:\n  - Table schemas explained\n  - Block-based storage rationale\n  - Access patterns\n- docs/locks-and-versions.md:\n  - Lock semantics and edge cases\n  - Version snapshot design\n  - Restore behavior\n- docs/agent-threads.md:\n  - Thread lifecycle\n  - Lock enforcement for threads\n  - Forking behavior\n  - Sandbox integration\n- docs/testing.md:\n  - Test layer overview\n  - How to run tests\n  - Writing new tests\n  - AI-agent testing guide\n- docs/contributing-for-agents.md:\n  - Short guide for AI coding tools\n  - Key commands (npm run test:ci)\n  - Where to find things\n- docs/development-setup.md:\n  - Node version requirements\n  - Convex CLI setup\n  - Python environment for sandbox\n  - Environment variables\n  - Running all services locally\n\nDeliverables:\n- All documentation files created\n- Clear, concise content\n- Diagrams where helpful\n- Easy for new contributors and AI agents to follow","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:52.066274+11:00","updated_at":"2025-11-23T09:03:36.099469+11:00","closed_at":"2025-11-23T09:03:36.099469+11:00"}
{"id":"report-writer-xf7","title":"Setup GitHub Actions CI/CD pipeline","description":"Setup GitHub Actions CI/CD pipeline:\n- .github/workflows/ci.yml:\n  - Trigger on: pull_request, push to main\n  - Jobs:\n    1. lint-and-unit:\n       - Checkout code\n       - Setup Node (use .nvmrc or specify version)\n       - Setup Python for sandbox\n       - Install dependencies (pnpm install)\n       - Run eslint (npm run lint)\n       - Run unit tests (npm test)\n       - Upload test results\n    2. integration:\n       - Start Convex dev (test mode)\n       - Start sandbox (with FakeLLM)\n       - Run integration tests (npm run test:integ)\n       - Upload results\n    3. e2e:\n       - Install Playwright browsers\n       - Start all services (Convex, sandbox, web)\n       - Run Playwright (npm run test:e2e)\n       - Upload Playwright report and screenshots\n  - Cache node_modules and Playwright browsers\n  - Fail fast: false (continue other jobs if one fails)\n\n- .github/workflows/e2e-nightly.yml (optional):\n  - Run full E2E suite nightly\n  - More extensive test scenarios\n\n- PR template:\n  - .github/PULL_REQUEST_TEMPLATE.md\n  - Checklist: tests added, docs updated, npm run test:ci passes\n\n- Issue templates:\n  - .github/ISSUE_TEMPLATE/bug_report.md\n  - .github/ISSUE_TEMPLATE/feature_request.md\n\nDeliverables:\n- Working CI pipeline\n- All tests run on every PR\n- Clear feedback on test failures\n- PR and issue templates","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:52.16145+11:00","updated_at":"2025-11-23T13:57:08.56145+11:00","closed_at":"2025-11-23T13:57:08.56145+11:00"}
{"id":"report-writer-ya5","title":"Implement agent threads UI","description":"Implement agent threads UI:\n- src/features/agentThreads/:\n  - ThreadsPanel component (list of threads)\n  - ThreadView component (chat-style message display)\n  - ThreadInput component (message composer)\n  - CreateThreadButton component\n  - ForkThreadButton component\n  - ProposedEditView component (shows agent's suggested changes)\n  - AcceptRejectButtons component (for agent edits)\n  - hooks/useAgentThread (messages, send, fork)\n  - hooks/useThreadLock (thread-specific lock management)\n\nKey features:\n- List threads with status, anchors, lock state\n- Create new thread (optionally anchored to section/comment)\n- Chat interface with user and agent messages\n- Visual distinction for message types (user, agent, tool)\n- Display proposed block edits inline\n- Accept/reject individual edits or entire proposal\n- Fork thread when locked by another user\n- 'Request control' for expired thread locks\n\nDeliverables:\n- Complete thread UI\n- Message display and input\n- Edit proposal review interface\n- Fork and lock handling\n- Tests for thread interactions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:51.487614+11:00","updated_at":"2025-11-23T13:35:51.468702+11:00","closed_at":"2025-11-23T13:35:51.468702+11:00"}
{"id":"report-writer-yds","title":"Implement Convex version snapshots system","description":"Implement version snapshot system in convex/features/versions.ts:\n- createVersionSnapshot(projectId, createdByUserId, summary?):\n  - Reads all current sections and blocks for project\n  - Creates reportVersions document with complete snapshot JSON\n  - Returns version ID\n- restoreVersion(versionId):\n  - Reads snapshot from reportVersions\n  - Deletes current sections/blocks\n  - Recreates them from snapshot\n  - Creates new version marking the restore\n- listVersionsByProject(projectId): Returns versions sorted by date\n- getVersionById(versionId): Returns version with full snapshot\n- compareVersions(versionIdA, versionIdB): Returns block-level diffs\n\nAlso implement convex/tables/reportVersions.ts helpers.\n\nDeliverables:\n- convex/features/versions.ts with snapshot and restore logic\n- convex/tables/reportVersions.ts\n- Tests for snapshot creation, restore, and round-trip accuracy","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-23T08:24:49.941818+11:00","updated_at":"2025-11-23T09:10:14.07484+11:00","closed_at":"2025-11-23T09:10:14.07484+11:00"}
